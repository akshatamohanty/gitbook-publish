#!/usr/bin/env node
const gbuild ="gitbook build" 
const checkout_gh ="git checkout gh-pages && echo 'in-gh-pages'"
const delete_prev_version ="find . -maxdepth 1 ! -name '.git' -and ! -name '_book' -and ! -name '.gitignore' -and ! -name '.' -exec rm -r -f {} +  && echo 'deleted-previous-version'"
const extract_files ="cp -r ./_book/* ./ && echo 'extracted-files'"
const clean_up = "rm -R ./_book && echo 'clean-up-completed'"
const push_to_ghpages ="git add . && git commit -m'Automated-Build-Complete' && echo 'git-committed'"
const checkout_master ="git checkout master && echo 'build-complete'"

const script = gbuild + " && " + checkout_gh + " && " + delete_prev_version + " && " + extract_files + " && " + clean_up + " && " + push_to_ghpages + " && " + checkout_master

var shell = require("shelljs");
shell.exec(script);